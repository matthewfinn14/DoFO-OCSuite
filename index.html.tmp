
const DRILL_DATA = [
    // OFFENSE
    { id: 'off_1', title: 'QB Drops & Footwork', type: 'offense', category: 'QB', videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ', description: 'Focus on 3-step, 5-step, and rollout mechanics. Maintain eye level.' },
    { id: 'off_2', title: 'RB Ball Security Gauntlet', type: 'offense', category: 'RB', videoUrl: '', description: 'High and tight. Rip attempts by defenders. Finish through the line.' },
    { id: 'off_3', title: 'WR Stalk Blocking', type: 'offense', category: 'WR', videoUrl: '', description: 'Break down in space. Mirror the defender. Hands inside.' },
    { id: 'off_4', title: 'OL Combo Blocks', type: 'offense', category: 'OL', videoUrl: '', description: 'Hip to hip. Overtake technique. Communication is key.' },
    { id: 'off_5', title: 'Route Tree Precision', type: 'offense', category: 'WR', videoUrl: '', description: 'Sharp cuts at correct depths. Speed out, Post, Dig, Comeback.' },
    { id: 'off_6', title: 'Mesh Point Drill', type: 'offense', category: 'QB', videoUrl: '', description: 'QB/RB exchange work. Read key defenders for RPO actions.' },

    // DEFENSE
    { id: 'def_1', title: 'Tackling: Profile & Drive', type: 'defense', category: 'LB', videoUrl: '', description: 'Heads up tackling. Near foot, near shoulder. Drive for 5.' },
    { id: 'def_2', title: 'DB Backpedal & Break', type: 'defense', category: 'DB', videoUrl: '', description: 'Smooth pedal. Low hips. Explode out of the break on receiver visual.' },
    { id: 'def_3', title: 'DL Get Off', type: 'defense', category: 'DL', videoUrl: '', description: 'React to ball movement. Low pad level. Hand violence.' },
    { id: 'def_4', title: 'Shed & Scrape', type: 'defense', category: 'LB', videoUrl: '', description: 'Disengage blocks. Lateral movement to gap. Flow to the ball.' },
    { id: 'def_5', title: 'Open Field Tackle', type: 'defense', category: 'DB', videoUrl: '', description: 'Closing space. Coming to balance. Angle preservation.' },

    // SPECIAL / CIRCUIT / GROUP
    { id: 'spec_1', title: 'Gunner Release', type: 'special', category: 'Punt', videoUrl: '', description: 'Beating the jam. Stack and restack. Speed to the ball.' },
    { id: 'grp_1', title: 'Inside Run (9-on-7)', type: 'group', category: 'Run', videoUrl: '', description: 'Physical run game work. Focus on double teams and LB fills.' },
    { id: 'circ_1', title: 'Agility Station', type: 'circuit', category: 'Agility', videoUrl: '', description: 'Cone drills. Pro agility. L-Drill. Ladder work.' },
    { id: 'circ_2', title: 'Turnover Circuit', type: 'circuit', category: 'Ball', videoUrl: '', description: 'Must have ball drills. Strip sacks. Interceptions. Fumble recovery.' },
    { id: 'grp_2', title: '7-on-7 Pass Skelly', type: 'group', category: 'Pass', videoUrl: '', description: 'Passing concepts vs coverage. No pass rush. Timing focus.' },
];

const DrillLibraryView = () => {
    const [selectedDrill, setSelectedDrill] = useState(null);
    const [activeOffFilter, setActiveOffFilter] = useState('ALL');
    const [activeDefFilter, setActiveDefFilter] = useState('ALL');

    const offCategories = ['ALL', 'QB', 'RB', 'WR', 'OL', 'TE'];
    const defCategories = ['ALL', 'DL', 'LB', 'DB'];

    const filterDrills = (type, categoryFilter) => {
        return DRILL_DATA.filter(d => d.type === type && (categoryFilter === 'ALL' || d.category === categoryFilter));
    };

    const renderDrillList = (drills, title) => (
        <div style={{ background: 'rgba(255,255,255,0.02)', borderRadius: '8px', padding: '1rem', height: '100%' }}>
            <h3 style={{ borderBottom: '1px solid var(--border)', paddingBottom: '0.5rem', marginBottom: '1rem', color: 'var(--text-secondary)', fontSize: '1rem', textTransform: 'uppercase', letterSpacing: '0.05em' }}>
                {title}
            </h3>
            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>
                {drills.length === 0 && <div style={{ color: 'var(--text-secondary)', fontStyle: 'italic', fontSize: '0.9rem' }}>No drills found.</div>}
                {drills.map(drill => (
                    <div
                        key={drill.id}
                        onClick={() => setSelectedDrill(drill)}
                        className="drill-card"
                        style={{
                            padding: '0.75rem',
                            background: 'rgba(255,255,255,0.05)',
                            borderRadius: '6px',
                            cursor: 'pointer',
                            transition: 'all 0.2s',
                            border: '1px solid transparent'
                        }}
                        onMouseEnter={e => {
                            e.currentTarget.style.background = 'rgba(255,255,255,0.1)';
                            e.currentTarget.style.transform = 'translateX(4px)';
                        }}
                        onMouseLeave={e => {
                            e.currentTarget.style.background = 'rgba(255,255,255,0.05)';
                            e.currentTarget.style.transform = 'translateX(0)';
                        }}
                    >
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.25rem' }}>
                            <span style={{ fontWeight: '600', color: 'var(--text-primary)' }}>{drill.title}</span>
                            <span style={{ fontSize: '0.7rem', background: 'var(--accent)', color: 'white', padding: '2px 6px', borderRadius: '4px' }}>{drill.category}</span>
                        </div>
                        <div style={{ fontSize: '0.8rem', color: 'var(--text-secondary)', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>
                            {drill.description}
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );

    return (
        <div className="animate-fade-in" style={{ padding: '2rem', height: '100%', display: 'flex', flexDirection: 'column', gap: '2rem', overflowY: 'auto' }}>

            <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
                <h1 style={{ fontSize: '2rem' }}>Practice <span style={{ color: 'var(--accent)' }}>Drill Library</span></h1>
            </div>

            {/* TOP SECTION: OFFENSE vs DEFENSE */}
            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '2rem' }}>

                {/* OFFENSE COLUMN */}
                <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
                        <h2 style={{ fontSize: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}><Icon name="Swords" color="#ef4444" /> Offensive Drills</h2>
                        <div style={{ display: 'flex', gap: '0.25rem' }}>
                            {offCategories.map(cat => (
                                <button
                                    key={cat}
                                    onClick={() => setActiveOffFilter(cat)}
                                    style={{
                                        padding: '4px 8px',
                                        fontSize: '0.75rem',
                                        borderRadius: '4px',
                                        border: 'none',
                                        background: activeOffFilter === cat ? 'var(--accent)' : 'rgba(255,255,255,0.1)',
                                        color: activeOffFilter === cat ? 'white' : 'var(--text-secondary)',
                                        cursor: 'pointer'
                                    }}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>
                    </div>
                    {renderDrillList(filterDrills('offense', activeOffFilter), 'Position Drills')}
                </div>

                {/* DEFENSE COLUMN */}
                <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
                        <h2 style={{ fontSize: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}><Icon name="Shield" color="#3b82f6" /> Defensive Drills</h2>
                        <div style={{ display: 'flex', gap: '0.25rem' }}>
                            {defCategories.map(cat => (
                                <button
                                    key={cat}
                                    onClick={() => setActiveDefFilter(cat)}
                                    style={{
                                        padding: '4px 8px',
                                        fontSize: '0.75rem',
                                        borderRadius: '4px',
                                        border: 'none',
                                        background: activeDefFilter === cat ? 'var(--accent)' : 'rgba(255,255,255,0.1)',
                                        color: activeDefFilter === cat ? 'white' : 'var(--text-secondary)',
                                        cursor: 'pointer'
                                    }}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>
                    </div>
                    {renderDrillList(filterDrills('defense', activeDefFilter), 'Position Drills')}
                </div>
            </div>

            {/* BOTTOM SECTION: TEAM & SPECIAL */}
            <div>
                <h2 style={{ fontSize: '1.5rem', marginBottom: '1rem', borderBottom: '1px solid var(--border)', paddingBottom: '0.5rem' }}>Team, Circuit & Special Teams</h2>
                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '1.5rem' }}>
                    {renderDrillList(filterDrills('special', 'ALL'), 'Special Teams')}
                    {renderDrillList(filterDrills('group', 'ALL'), 'Group / Team')}
                    {renderDrillList(filterDrills('circuit', 'ALL'), 'Circuits')}
                </div>
            </div>

            {/* VIDEO MODAL */}
            {selectedDrill && (
                <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.85)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000, backdropFilter: 'blur(5px)' }} onClick={() => setSelectedDrill(null)}>
                    <div style={{ width: '800px', maxWidth: '90%', background: '#1e1e1e', borderRadius: '12px', padding: '0', overflow: 'hidden', boxShadow: '0 20px 50px rgba(0,0,0,0.5)', border: '1px solid var(--border)' }} onClick={e => e.stopPropagation()}>
                        <div style={{ padding: '1.5rem', borderBottom: '1px solid var(--border)', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                            <h2 style={{ margin: 0, fontSize: '1.5rem' }}>{selectedDrill.title}</h2>
                            <button onClick={() => setSelectedDrill(null)} style={{ background: 'none', border: 'none', color: 'var(--text-secondary)', fontSize: '1.5rem', cursor: 'pointer' }}>&times;</button>
                        </div>

                        <div style={{ padding: '2rem', display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>
                            {/* Video Placeholder or Embed */}
                            <div style={{ width: '100%', aspectRatio: '16/9', background: 'black', display: 'flex', alignItems: 'center', justifyContent: 'center', borderRadius: '8px', overflow: 'hidden' }}>
                                {selectedDrill.videoUrl ? (
                                    <iframe width="100%" height="100%" src={selectedDrill.videoUrl} frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe>
                                ) : (
                                    <div style={{ textAlign: 'center', color: 'var(--text-secondary)' }}>
                                        <Icon name="Monitor" size={48} style={{ marginBottom: '1rem', opacity: 0.5 }} />
                                        <p>No video available for this drill.</p>
                                    </div>
                                )}
                            </div>

                            <div>
                                <h4 style={{ color: 'var(--accent)', marginBottom: '0.5rem', textTransform: 'uppercase', fontSize: '0.85rem' }}>Description / Key Coaching Points</h4>
                                <p style={{ lineHeight: '1.6', color: 'var(--text-secondary)' }}>{selectedDrill.description}</p>
                            </div>
                        </div>
                    </div>
                </div>
            )}

        </div>
    );
};
